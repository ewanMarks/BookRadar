@{
    ViewData["Title"] = "Búsqueda por autor";
    Layout = "_Layout";
}

<div class="card shadow-sm">
    <div class="card-body">
        <h1 class="h3 mb-3">Buscar libros por autor</h1>
        <p class="text-muted mb-4">Ingresa el nombre del autor y obtén la lista de títulos disponibles. Puedes consultar el <a asp-action="History">historial</a> de búsquedas.</p>

        <form method="post" asp-action="Search" id="searchForm">
            @Html.AntiForgeryToken()
            <div class="row g-2">
                <div class="col-md-8">
                    <label class="form-label" for="author">Autor</label>
                    <input type="text" class="form-control" id="author" name="author" placeholder="Ej: Gabriel García Márquez" required />
                    <div class="invalid-feedback">El autor es obligatorio.</div>
                </div>
                <div class="col-md-4 d-flex align-items-end gap-2">
                    <button type="submit" class="btn btn-primary btn-icon" id="btnSearch">
                        🔎 <span>Buscar</span>
                    </button>
                    <a asp-controller="Books" asp-action="History" class="btn btn-outline-secondary btn-icon">
                        🗂️ <span>Ver historial</span>
                    </a>
                </div>
            </div>
        </form>

        @if (!ViewData.ModelState.IsValid)
        {
            <div class="alert alert-danger mt-3">
                @foreach (var err in ViewData.ModelState.Values.SelectMany(v => v.Errors))
                {
                    <div>@err.ErrorMessage</div>
                }
            </div>
        }
    </div>
</div>

@section Scripts {
    <script src="~/js/books.js" asp-append-version="true"></script>
}
